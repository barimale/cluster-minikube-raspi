
pool:
  name: 'Default'
  demands:
    - agent.name -equals raspberrypi

steps:
- script: |
    sudo apt install git-all -y
  displayName: 'Install Git'
- script: |
    #sudo apt install docker.io -y
    #sudo usermod -aG docker $USER && newgrp docker
  displayName: 'npm build'
- script: |
    wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash
    nvm install 14.21.3
    sudo apt-get install npm -y
  displayName: 'Install nvm'
- script: |
    sudo apt-get install snapd -y
    source ~/.bashrc
  displayName: 'Install snap'
- script: |
    sudo snap install microk8s --classic
    sudo apt-get install kubectl -y
  displayName: 'Install microk8s and kubectl'
  continueOnError: true

